{% extends 'base.html' %}
{% load static %}

{% block title %}Detalles{% endblock %}

{% block content %}
<div class="container-fluid d-flex justify-content-center align-items-center min-vh-100 px-3">
    <div class="card shadow-lg bg-white rounded-4 p-5 m-4 col-lg-8 col-md-10 col-sm-12" style="background-color:#f5f5dc;">
        <h2 class="text-center fw-bold mt-2 mb-4" style="color: #34495E;">Detalles del Plan</h2>
        <hr class="border-1 opacity-75 mt-1">

        <div class="mb-3">
            <strong>Nombre del Plan:</strong>
            <p>{{ plan.name }}</p>
        </div>

        <div class="mb-3">
            <strong>Imágenes:</strong>
            <div class="d-flex flex-wrap gap-3">
                {% for picture in pictures %}
                    <img src="{{ picture.picture.url }}" alt="Imagen del Plan" width="150" class="rounded shadow">
                {% empty %}
                    <p>No hay imágenes disponibles.</p>
                {% endfor %}
            </div>
        </div>

        <div class="mb-3">
            <strong>Descripción:</strong>
            <p>{{ plan.description }}</p>
        </div>

        <div class="mb-3">
            <strong>Precio:</strong>
            <p>${{ plan.price }}</p>
        </div>

        <div class="mb-3">
            <strong>Número de Cupos:</strong>
            <p>{{ plan.places }}</p>
        </div>

        <div class="mb-3">
            <strong>Categoría:</strong>
            <p>{{ plan.category_id.category }}</p>
        </div>

        <div class="mb-3">
            <strong>Opciones Adicionales:</strong>
            <ul>
                <li>Transporte: {% if plan.has_transport %}Sí{% else %}No{% endif %}</li>
                <li>Comida: {% if plan.has_meal %}Sí{% else %}No{% endif %}</li>
                <li>Guía: {% if plan.has_guide %}Sí{% else %}No{% endif %}</li>
            </ul>
        </div>

        <div class="mb-3">
            <strong>Fechas Disponibles:</strong>
            <ul>
                {% for date_obj in plan_dates %}
                    <li>{{ date_obj.plan_date|date:'Y-m-d' }}</li>  
                {% empty %}
                    <li>No hay fechas disponibles</li>
                {% endfor %}
            </ul>
        </div>

        <div class="d-flex justify-content-center mt-4 flex-wrap gap-3">
            <a href="{% url 'editPlan' plan.plan_id %}" class="btn shadow px-4" style="background-color: #34495E; color: white;">
                Editar
            </a>

            <form action="{% url 'deletePlan' plan.plan_id %}" method="POST" onsubmit="return confirm('¿Estás seguro de eliminar este plan?');">
                {% csrf_token %}
                <button type="submit" class="btn shadow px-4" style="background-color: rgb(199, 86, 86); color: white;">
                    Eliminar
                </button>
            </form>

            <a href="{% url 'list' %}" class="btn shadow px-4" style="background-color: #1ABC9C; color: white;">
                Volver
            </a>
        </div>
    </div>
</div>
{% endblock %}
